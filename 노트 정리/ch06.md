# 다양한 연관관계 매핑





### 연관관계 매핑시 고려사항

1. 다중성

   - 다대일: @ManyToOne => 제일 많이 씀
   - 일대다: @OneToMany => 권장하지 않는 모델
   - 일대일: @OneToOne
   - 다대다: @ManyToMany => 실무에서 절대 사용 🙅‍♀️
     - 쓰지 말아야할 이유
       - 다대다 사이에 두 테이블의 기본키를 합쳐서 새로운 테이블을 만들어야 함
       - 두 테이블은 새로운 테이블의 기본키를 외래키로 가짐

2. 단/양방향

   - 양쪽이 서로 참조할시 양방향

     - but, 객체는 참조가 2개이므로 엄밀히 말해서 객체는 양방향이란 개념이 x

       (A객체 -> B객체, B객체 -> A객체)

3. 연관관계의 주인



### 일대일

- 주 테이블이나 대상 테이블 중에 외래 키 선택 가능

  - 둘 중 한군데만 넣어두 됨
  - 다대일 단뱡향 매핑과 똑같음

- 외래 키에 데이터베이스 유니크(UNI) 제약조건 추가

  - 추가 안 해도 되지만 관리하기 어려움

- 예시

  - Member : Locker = 1 : 1

    - Member

      ```java
          @OneToOne
          @JoinColumn(name = "LOCKED_ID")
          private Locker locker;
      ```

    - Locker

      ```java
      @Entity
      public class Locker {
          @Id @GeneratedValue
          private Long id;
          private String name;
      
          // 양방향 관계 만들기
          @OneToOne(mappedBy = "locker") // Member에 있는 locker
          private Member member;
      }
      ```

      

