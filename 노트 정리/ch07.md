# ê³ ê¸‰ ë§¤í•‘





### ìƒì†ê´€ê³„ ë§¤í•‘

- ê´€ê³„í˜• DBëŠ” ìƒì† ê´€ê³„X
- ê°ì²´ì˜ ìƒì† ê´€ê³„ì™€ ìœ ì‚¬í•œ ìŠˆí¼íƒ€ì… / ì„œë¸Œíƒ€ì… ê´€ê³„ë¼ëŠ” ëª¨ë¸ë§ ê¸°ë²•ì´ ìˆìŒ



### ìƒì†ê´€ê³„ ì „ëµ

1. ì¡°ì¸ ì „ëµ ğŸ‘ 

   - ê°ê° í…Œì´ë¸”ë¡œ ë³€í™˜

     ```java
     @Entity
     @Inheritance(strategy = InheritanceType.JOINED)
     @DiscriminatorColumn(name = "TYPE") // default ì´ë¦„ì€ DTYPE
     public class Item {
     
         @Id @GeneratedValue
         private Long id;
     
         private String name;
         private int price;
     }
     ```

     - Itemì„ extends ë°›ì€ ë‹¤ë¥¸ classë“¤ì´ ì¡°ì¸ ì „ëµìœ¼ë¡œ ë¬¶ì„

     - `@DiscriminatorColumn`ì€ ìƒì† ë°›ì€ ê°ì²´ë“¤ì„ ì‰½ê²Œ êµ¬ë¶„í•  ìˆ˜ ìˆê²Œ í•¨

       ```java
       @Entity
       @DiscriminatorValue("MOVIE")
       public class Movie extends Item {
           private String Director;
           private String Actor;
           private String Name;
           // GETTER, SETTER...
       ```

   - ì¥ì 

     1. í…Œì´ë¸” ì •ê·œí™”
     2. ì™¸ë˜ í‚¤ ì°¸ì¡° ë¬´ê²°ì„± ì œì•½ì¡°ê±´ í™œìš©ê°€ëŠ¥
     3. ì €ì¥ê³µê°„ íš¨ìœ¨í™”

   - ë‹¨ì 

     1. ì¡°íšŒì‹œ ì¡°ì¸ì„ ë§ì´ ì‚¬ìš©, ì„±ëŠ¥ ì €í•˜

     2. ì¡°íšŒ ì¿¼ë¦¬ê°€ ë³µì¡í•¨

        

2. ë‹¨ì¼ í…Œì´ë¸” ì „ëµ

   - `@Inheritance(strategy = InheritanceType.SINGLE_TABLE)`ì„ ë‹¨ì¼ í…Œì´ë¸”ë¡œ ìƒì„±

   - êµ¬ë¶„ì„ ìœ„í•´ DTYPEì´ ë””í´íŠ¸ë¡œ ìƒì„±ë¨

     `@DiscriminatorValue("MOVIE")` ì¨ì£¼ê¸°!

     - ì¥ì 

       1. ì¡°ì¸ì´ í•„ìš” ì—†ì–´ì„œ ì¡°íšŒ ì„±ëŠ¥ì´ ë¹ ë¦„
       2. ì¡°íšŒ ì¿¼ë¦¬ ë‹¨ìˆœ

     - ë‹¨ì 

       1. ìì‹ ì—”í‹°í‹°ê°€ ë§¤í•‘í•œ ì»¬ëŸ¼ì€ ëª¨ë‘ null í—ˆìš© 

          ğŸ¤¦â€â™€ï¸ ì¹˜ëª…ì  ë‹¨ì 

          - ì˜ˆ) Item í•˜ìœ„ ê°ì²´ì¸ ë¬´ë¹„ëŠ” ê°ë…ê³¼ ë°°ìš°, ì˜í™” ì´ë¦„ë§Œ ë„£ìœ¼ë¯€ë¡œ

            ë‹¤ë¥¸ í•˜ìœ„ ê°ì²´ì˜ ì»¬ëŸ¼ë“¤ì€ nullë¡œ ì‚½ì…

       2. í…Œì´ë¸”ì´ ì»¤ì§€ë©´ ì˜¤íˆë ¤ ì¡°íšŒ ì„±ëŠ¥ì´ ëŠ¦ì–´ì§ˆ ìˆ˜ ìˆìŒ

3. êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ 

   ğŸ™…â€â™€ï¸ **ì“°ì§€ ë§ì**

   - `@Inheritance(strategy = InheritanceType.TABLE_PER_CLASEE)`

   - ê°ì ì„œë¸Œíƒ€ì… í…Œì´ë¸”ì„ ë§Œë“¤ë¯€ë¡œ êµ¬ë¶„ì„ ìœ„í•œ

     `@DiscriminatorColumn`ì´ í•„ìš”X

   



### @MappedSuperclass

- ê³µí†µ ë§¤í•‘ ì •ë³´ê°€ í•„ìš”í•  ë•Œ ì‚¬ìš©

  ```java
  @MappedSuperclass    // ë§¤í•‘ ì •ë³´ë§Œ ë‹´ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤
  public abstract class BaseEntity {
      @Column(name = "INSERT_TIME")
      private LocalDateTime createdDate;
      @Column(name = "UPDATE_TIME")
      private LocalDateTime lastModifiedDate;
  // ... getter, setter
  ```

  - DATAëŠ” ì•ì¥ì—ì„œ ìë™ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ë²• ë°°ì›€

  ```java
  @Entity
  public class Team extends BaseEntity {
      ...
  ```

- ìƒì† ê´€ê³„ X

- ì—”í‹°í‹° X

- í…Œì´ë¸”ê³¼ ë§¤í•‘ X

- ì¡°íšŒ, ê²€ìƒ‰ ë¶ˆê°€

  `.find(BaseEntity)` X

- ì§ì ‘ ìƒì„±í•´ì„œ ì‚¬ìš©í•  ì¼ì´ ì—†ìœ¼ë¯€ë¡œ ì¶”ìƒ í´ë˜ìŠ¤(abstract) ê¶Œì¥

- ğŸ™Œ ì°¸ê³ 

  @Entity í´ë˜ìŠ¤ëŠ” ì—”í‹°í‹°ë‚˜ @MappedSuperclassë¡œ ì§€ì •í•œ í´ë˜ìŠ¤ë§Œ ìƒì† ê°€ëŠ¥

